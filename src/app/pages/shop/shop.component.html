<!-- src/app/pages/shop/shop.component.html -->
<app-home-nav></app-home-nav>
<section class="shop-container">
    
    <!-- 頁面標題區 -->
    <div class="shop-header">
      <h1>LINE Hero 商城</h1>
      <p class="shop-description">購買遊戲禮包與會員服務，開啟您的傳奇冒險之旅</p>
    </div>
  
    <!-- 商品分類標籤 -->
    <div class="category-tabs">
      <button 
        *ngFor="let category of categories" 
        [class.active]="currentCategory === category.id"
        (click)="setCategory(category.id)">
        {{ category.name }}
      </button>
    </div>
  
    <!-- 商品iframe展示區 -->
    <div class="products-iframe-grid">
      <div *ngFor="let product of filteredProducts" class="product-iframe-container">
        <h3 class="product-title">{{ product.name }}</h3>
        <div class="iframe-wrapper">
          <!-- Loading 狀態 -->
          <div *ngIf="!iframeLoaded[product.id]" class="loading-container">
            <div class="loading-spinner"></div>
            <p class="loading-text">載入中...</p>
          </div>
          
          <!-- iframe -->
          <iframe 
            [src]="getSafeUrl(product.iframe)" 
            width="400" 
            height="620" 
            style="border:0;" 
            frameborder="0" 
            loading="lazy"
            [title]="product.name + ' 購買頁面'"
            (load)="onIframeLoad(product.id)"
            [class.hidden]="!iframeLoaded[product.id]">
          </iframe>
        </div>
      </div>
    </div>
  </section>